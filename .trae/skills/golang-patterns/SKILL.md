---
name: golang-patterns
description: Go 语言编程最佳实践，包括并发编程、错误处理、性能优化等
---

# Go 编程模式

## 触发场景
当用户需要编写 Go 代码、实现 Go 项目或优化 Go 代码时，自动触发 Go 编程模式技能。

## 代码规范

### Go 惯例
- 命名规范（包名、函数名、变量名）
- 格式化工具 gofmt
- 导入管理 go mod
- 文档注释规范

### 项目结构
- 标准项目布局
- 模块设计
- 包组织原则
- 依赖管理

## 核心模式

### 错误处理
- 明确的错误返回值
- 错误包装和检查
- 自定义错误类型
- 错误链和上下文

### 并发编程
- goroutine 基础
- channel 通信
- select 语句
- 上下文 context

### 接口设计
- 接口隐式实现
- 接口组合
- 依赖注入
- mock 测试

## 性能优化

### 内存管理
- 栈 vs 堆分配
- 逃逸分析
- 内存池
- 缓冲区复用

### 同步原语
- mutex 使用
- atomic 原子操作
- sync.WaitGroup
- errgroup 并发

### 性能分析
- pprof 性能分析
- 基准测试
- 内存分析
- 追踪 trace

## 测试模式

### table-driven 测试
- 测试表格设计
- 子测试组织
- 参数化测试

### Mock 和接口
- 接口 mock
- http.Handler 测试
- 数据库 mock
- 依赖注入测试

## 工具和库

### 常用库
- 标准库用法
- 第三方库选择
- 框架对比

### 开发工具
- go generate
- go build 优化
- 跨平台编译

## 使用示例
- "用 Go 实现这个微服务"
- "优化这段 Go 代码"
- "编写 Go 单元测试"
- "实现 Go 并发任务"
